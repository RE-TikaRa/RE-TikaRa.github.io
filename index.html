<!DOCTYPE html>
<!-- 声明文档类型为 HTML5 -->
<html lang="zh-CN"> <!-- 设置页面语言为简体中文 -->
<head>
    <!-- 元数据 -->
    <meta charset="UTF-8"> <!-- 设置字符编码为 UTF-8 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- 设置视口，以确保在移动设备上正确渲染 -->
    <title>ALp_Studio</title> <!-- 页面标题 -->
    <meta name="description" content="亓翎_Re-TikaRa 的个人主页。一个展示项目、分享想法和记录生活的地方。"> <!-- 页面描述，用于SEO -->
    <meta name="keywords" content="亓翎, Re-TikaRa, 个人主页, 博客, 技术, 作品集, 前端开发"> <!-- 页面关键词，用于SEO -->
    <link rel="icon" type="image/x-icon" href="https://free.picui.cn/free/2025/12/30/6953f28ba97a0.ico"> <!-- 设置网站图标 -->

    <!-- 预加载主题脚本，防止闪烁 -->
    <script>
        (function() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const initialTheme = savedTheme || (prefersDark ? 'dark' : 'light');
            document.documentElement.setAttribute('data-theme', initialTheme);
        })();
    </script>
    
    <!-- 预连接外部资源以提升加载性能 -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>

    <!-- 引入外部样式表 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"> <!-- APlayer CSS -->
    <link rel="stylesheet" href="css/style.css"> <!-- 自定义样式表 -->
    <link rel="stylesheet" href="css/style-enhanced.css"> <!-- 深度美化样式表 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> <!-- Font Awesome 图标库 -->
</head>
<body>
    <!-- 欢迎屏幕 -->
    <div id="welcome-screen">
        <div id="welcome-text-container">
            <!-- 用于显示打字效果的文本容器 -->
            <span id="welcome-text"></span><span class="cursor"></span>
        </div>
    </div>

    <!-- 背景元素 -->
    <div class="background-gradient"></div> <!-- 背景渐变层 -->
    <canvas id="starfield-layer1" class="starfield-canvas" data-layer-id="1"></canvas> <!-- 星空背景层1 -->
    <canvas id="starfield-layer2" class="starfield-canvas" data-layer-id="2"></canvas> <!-- 星空背景层2 -->
    <canvas id="starfield-layer3" class="starfield-canvas" data-layer-id="3"></canvas> <!-- 星空背景层3 -->
    <canvas id="shooting-star-canvas" class="starfield-canvas"></canvas> <!-- 流星动画层 -->
    <canvas id="raindrop-canvas" class="starfield-canvas"></canvas> <!-- 雨滴动画层 -->

    <!-- 设置按钮 -->
    <div class="settings-wrapper">
        <button id="settings-toggle" type="button" aria-label="打开设置" aria-expanded="false" aria-controls="settings-panel">
            <i class="fa-solid fa-gear" aria-hidden="true"></i>
            <span class="icon-text">设定</span>
        </button>
    </div>

    <!-- 设置面板 -->
    <div id="settings-panel" class="card card--tertiary glass" hidden>
        <div class="settings-header">
            <h3>显示设置</h3>
            <button id="settings-close" type="button" aria-label="关闭设置">&times;</button>
        </div>
        <div class="settings-content">
            <div class="setting-item">
                <label for="toggle-high-contrast">高对比模式</label>
                <input type="checkbox" id="toggle-high-contrast" class="toggle-switch" data-setting="highContrast">
            </div>
            <div class="setting-item">
                <label for="toggle-lite-mode">轻量模式</label>
                <input type="checkbox" id="toggle-lite-mode" class="toggle-switch" data-setting="liteMode">
            </div>
            <div class="setting-item">
                <label for="toggle-starfield">星空背景</label>
                <input type="checkbox" id="toggle-starfield" class="toggle-switch" data-setting="starfield" checked>
            </div>
            <div class="setting-item">
                <label for="toggle-shooting-stars">流星效果</label>
                <input type="checkbox" id="toggle-shooting-stars" class="toggle-switch" data-setting="shootingStars" checked>
            </div>
            <div class="setting-item">
                <label for="toggle-raindrops">雨滴效果</label>
                <input type="checkbox" id="toggle-raindrops" class="toggle-switch" data-setting="raindrops" checked>
            </div>
            <div class="setting-item">
                <label for="toggle-card-float">卡片浮动</label>
                <input type="checkbox" id="toggle-card-float" class="toggle-switch" data-setting="cardFloat" checked>
            </div>
            <div class="setting-item">
                <label for="toggle-autoplay">音乐自动播放</label>
                <input type="checkbox" id="toggle-autoplay" class="toggle-switch" data-setting="musicAutoplay" checked>
            </div>
            <div class="setting-item">
                <label for="toggle-playlist-type">播放列表</label>
                <select id="toggle-playlist-type" class="select-switch" data-setting="playlistType">
                    <option value="song">单曲</option>
                    <option value="album">专辑</option>
                </select>
            </div>
        </div>
    </div>

    <!-- 主题切换按钮 -->
    <div class="theme-switch-wrapper">
        <button id="theme-toggle" type="button" aria-label="切换主题">
            <i class="fa-solid fa-moon" aria-hidden="true"></i> <!-- 月亮图标，代表深色模式 -->
            <span class="theme-toggle-text">深色</span>
        </button>
    </div>
    
    <!-- 主要内容容器，使用视差效果 -->
    <div class="parallax-container">
        <div class="grid-container layout-grid">
            <aside class="nav-panel" aria-label="主导航">
                <div class="nav-brand">
                    <span class="brand-title"><span class="is-latin" lang="en">ALp_Studio</span></span>
                    <span class="brand-sub">观测站 · 控制台</span>
                </div>
                <nav class="nav-list" aria-label="主导航列表">
                    <a href="#" class="nav-item is-active" aria-current="page" id="nav-home-btn">
                        <i class="fa-solid fa-house" aria-hidden="true"></i>
                        <span>主页</span>
                    </a>
                    <a href="ProjectList/" class="nav-item">
                        <i class="fa-solid fa-code" aria-hidden="true"></i>
                        <span>项目</span>
                    </a>
                    <a href="https://www.re-tikara.fun/Blog" target="_blank" rel="noopener noreferrer" class="nav-item">
                        <i class="fa-solid fa-pen-nib" aria-hidden="true"></i>
                        <span>博客</span>
                    </a>
                    <a href="https://www.re-tikara.fun/Article" target="_blank" rel="noopener noreferrer" class="nav-item">
                        <i class="fa-solid fa-book-open" aria-hidden="true"></i>
                        <span>文章库</span>
                    </a>
                    <a href="https://github.com/RE-TikaRa" target="_blank" rel="noopener noreferrer" class="nav-item">
                        <i class="fa-brands fa-github" aria-hidden="true"></i>
                        <span><span class="is-latin" lang="en">GitHub</span></span>
                    </a>
                    <a href="https://space.bilibili.com/374412219" target="_blank" rel="noopener noreferrer" class="nav-item">
                        <i class="fa-brands fa-bilibili" aria-hidden="true"></i>
                        <span><span class="is-latin" lang="en">BiliBili</span></span>
                    </a>
                </nav>
            </aside>

            <main class="main-panel" aria-labelledby="profile-heading">
                <div class="card card--tertiary profile-card glass tilt-card">
                    <div class="profile-content-wrapper">
                        <div class="avatar-large">
                            <img src="https://s2.loli.net/2025/12/22/mkWtIYraVxdnTCe.jpg" alt="亓翎_Re-TikaRa 的头像"> <!-- 个人头像 -->
                        </div>
                        <div class="profile-text">
                            <h2 class="profile-name" id="profile-heading">亓翎_Re-TikaRa</h2> <!-- 用户名 -->
                            <div class="profile-greeting" aria-label="问候语">
                                <div class="greeting-title" id="greeting">你好</div> <!-- 问候语标题 -->
                            </div>
                            <div class="profile-desc-box">
                                <span class="profile-desc-text">一个人造生命体的自娱自乐</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="latest-articles-card" class="card card--tertiary glass tilt-card" hidden>
                    <div class="card-header">
                        <div class="card-title">最新文章</div>
                        <a href="https://www.re-tikara.fun/Blog" target="_blank" class="card-more-link">更多 <i class="fa-solid fa-arrow-right"></i></a>
                    </div>
                    <ul id="article-list" class="article-list">
                        <!-- Articles will be loaded here -->
                    </ul>
                </div>
            </main>

            <aside class="side-panel" aria-label="实时与媒体">
                <div id="weather-card" class="card card--tertiary weather-card glass tilt-card" hidden>
                    <div class="weather-content">
                        <div class="weather-meta">
                            <span class="weather-tag"><span class="is-latin" lang="en">WEATHER</span></span>
                            <span class="weather-source" id="weather-source">定位中</span>
                        </div>
                        <div class="weather-location">加载中...</div>
                        <div class="weather-main">
                            <div class="weather-temp">--°</div>
                            <div class="weather-icon">
                                <i class="fa-solid fa-spinner fa-spin"></i>
                            </div>
                        </div>
                        <div class="weather-description">正在获取天气</div>
                    </div>
                </div>

                <div class="card card--tertiary date-card glass tilt-card">
                    <div class="card-header">
                        <div class="card-title">日期</div>
                    </div>
                    <div class="date-display" id="today">——</div>
                </div>

                <div id="music-card" class="card card--tertiary glass tilt-card">
                    <!-- 音乐播放器将在这里 -->
                </div>
            </aside>

            <section class="hitokoto-panel" aria-label="记录">
                <div id="hitokoto-card" class="card card--tertiary glass tilt-card">
                    <!-- Hitokoto -->
                </div>
            </section>
        </div>
    </div>

    <!-- 页面页脚 -->
    <footer class="site-footer">
        <p>实例仍在运行  日志尚未终止  // <span class="is-latin" lang="en">The instance is still running; the logs haven’t terminated.</span></p>
    </footer>

    <!-- CLI 彩蛋 -->
    <div id="cli-container" hidden>
        <div id="cli-output"></div>
        <div id="cli-input-line">
            <span class="cli-prompt">[tika@lab ~]$</span>
            <input type="text" id="cli-input" autocomplete="off" spellcheck="false">
        </div>
    </div>

    <!-- 引入 JavaScript 文件 -->
    <script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
    <script src="js/script.js"></script>
    <script>
        // 5 clicks on Home to jump to status
        const homeBtn = document.getElementById('nav-home-btn');
        let clickCount = 0;
        let clickTimer;

        if (homeBtn) {
            homeBtn.addEventListener('click', (e) => {
                e.preventDefault();
                clickCount++;
                
                clearTimeout(clickTimer);
                clickTimer = setTimeout(() => {
                    clickCount = 0;
                }, 500); // Reset count if no click within 500ms

                if (clickCount >= 5) {
                    window.location.href = 'status/';
                    clickCount = 0;
                }
            });
        }
    </script>
</body>
</html>
