/*
 *
 *  Tika's Personal Homepage - Stylesheet
 *  Version: 2.0 (Refactored)
 *  Tika 的个人主页 - 样式表
 *  版本: 2.0 (重构版)
 *
 */

/* --- 0. FONT DEFINITIONS / 字体定义 --- */
/* ------------------------------------ */

@font-face {
    font-family: "NasaDisplay"; /* Nasa 主题字体 */
    src:
        url("../fonts/NasaDisplay.woff2") format("woff2"),
        url("../fonts/NasaDisplay.woff") format("woff");
    font-weight: 100 900; /* 字体粗细范围 */
    font-style: normal; /* 正常样式 */
    font-display: swap; /* 字体加载策略 */
}

@font-face {
    font-family: "XinHuoTi"; /* 中文主体字体 */
    src:
        url("../fonts/中华薪火体.woff2") format("woff2"),
        url("../fonts/中华薪火体.woff") format("woff");
    font-weight: 100 900;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: "DS-Digital"; /* 数字时钟字体 */
    src:
        url("../fonts/DS-Digital-Normal.woff2") format("woff2"),
        url("../fonts/DS-Digital-Normal.woff") format("woff");
    font-weight: normal;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: "DS-Digital";
    src:
        url("../fonts/DS-Digital-Bold.woff2") format("woff2"),
        url("../fonts/DS-Digital-Bold.woff") format("woff");
    font-weight: bold; /* 粗体 */
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: "DS-Digital";
    src:
        url("../fonts/DS-Digital-Italic.woff2") format("woff2"),
        url("../fonts/DS-Digital-Italic.woff") format("woff");
    font-weight: normal;
    font-style: italic; /* 斜体 */
    font-display: swap;
}

@font-face {
    font-family: "DS-Digital";
    src:
        url("../fonts/DS-Digital-BoldItalic.woff2") format("woff2"),
        url("../fonts/DS-Digital-BoldItalic.woff") format("woff");
    font-weight: bold;
    font-style: italic; /* 粗斜体 */
    font-display: swap;
}


/* --- 1. ROOT & THEME VARIABLES / 根元素与主题变量 --- */
/* ---------------------------------------------------- */

:root {
    /* Color Scheme / 配色方案 */
    color-scheme: light; /* 默认浅色主题 */

    /* Background / 背景 */
    --bg-image: url('https://s2.loli.net/2025/12/22/nBapAxK8NowjZFP.png'); /* 背景图片 */
    --bg-color: #f4f4f8; /* 背景颜色（备用） */

    /* Glassmorphism / 玻璃拟态 */
    --glass-bg: rgba(255, 255, 255, 0.75); /* 玻璃背景色 */
    --glass-border: rgba(220, 220, 220, 0.8); /* 玻璃边框色 */
    --glass-inset: rgba(255, 255, 255, 0.4); /* 玻璃内嵌高光 */
    --glass-glow: rgba(var(--accent-rgb), 0.12); /* 玻璃辉光 */
    --blur-strength: 16px; /* 模糊强度 */

    /* Typography / 字体排印 */
    --text-primary: #F0EFEB; /* 主要文本颜色 */
    --text-secondary: #bdc3c7; /* 次要文本颜色 */

    /* Accents / 强调色 */
    --accent-color: #2980b9; /* 强调色 */
    --accent-rgb: 41, 128, 185; /* 强调色的 RGB 值 */
    --highlight-bg: #fff; /* 高亮背景 */

    /* Sizing & Radius / 尺寸与圆角 */
    --radius-lg: 28px; /* 大圆角 */
    --radius-md: 18px; /* 中圆角 */

    /* Shadows & Effects / 阴影与效果 */
    --card-shadow: 0 18px 45px rgba(0, 0, 0, 0.12); /* 卡片阴影 */
    --card-hover-shadow: 0 24px 60px rgba(0, 0, 0, 0.16); /* 卡片悬停阴影 */
    --focus-ring: 0 0 0 4px rgba(var(--accent-rgb), 0.22); /* 聚焦环 */

    /* Animation & Transitions / 动画与过渡 */
    --ease-out: cubic-bezier(0.2, 0.9, 0.2, 1); /* 缓动函数 */
    --breathe: 8.5s; /* 呼吸动画时长 */
    --breathe-slow: 18s; /* 慢速呼吸动画时长 */

    /* Interactive Properties / 交互属性 */
    --spot-x: 50%; /* 鼠标光斑 X 坐标 */
    --spot-y: 28%; /* 鼠标光斑 Y 坐标 */
    --spot-a: 0.10; /* 鼠标光斑透明度 */
}

[data-theme="dark"] {
    color-scheme: dark; /* 深色主题 */
    --bg-image: url('https://s2.loli.net/2025/12/22/uBnZDzxcI7JHCX3.png');
    --bg-color: #1a1a1a;
    --glass-bg: rgba(16, 16, 18, 0.42);
    --glass-border: rgba(255, 255, 255, 0.18);
    --glass-inset: rgba(255, 255, 255, 0.14);
    --glass-glow: rgba(var(--accent-rgb), 0.08);
    --text-primary: #e0e0e0;
    --text-secondary: #a0a0a0;
    --accent-color: #f39c12;
    --accent-rgb: 243, 156, 18;
    --highlight-bg: rgba(255, 255, 255, 0.1);
    --card-shadow: 0 18px 55px rgba(0, 0, 0, 0.55);
    --card-hover-shadow: 0 22px 70px rgba(0, 0, 0, 0.65);
    --focus-ring: 0 0 0 4px rgba(var(--accent-rgb), 0.16);
    --spot-a: 0.08;
}


/* --- 2. BASE & RESET STYLES / 基础与重置样式 --- */
/* ---------------------------------------------- */

* {
    margin: 0; /* 清除外边距 */
    padding: 0; /* 清除内边距 */
    box-sizing: border-box; /* 盒模型设为 border-box */
}

html {
    background-color: var(--bg-color); /* 背景色 */
    /* 过渡效果现在由 View Transitions API 处理 */
}

body {
    display: flex;
    justify-content: center; /* 水平居中 */
    align-items: center; /* 垂直居中 */
    min-height: 100vh; /* 最小高度为视口高度 */
    padding: clamp(18px, 4vw, 30px); /* 响应式内边距 */
    overflow-x: hidden; /* 隐藏水平溢出 */
    font-family: "XinHuoTi", "Noto Serif SC", "Songti SC", "STSong", "SimSun", serif; /* 默认字体栈 */
    color: var(--text-primary); /* 文本颜色 */
    -webkit-font-smoothing: antialiased; /* 抗锯齿（Chrome, Safari） */
    -moz-osx-font-smoothing: grayscale; /* 抗锯齿（Firefox） */
    text-rendering: optimizeLegibility; /* 优化文本渲染 */
}

::selection {
    background: rgba(var(--accent-rgb), 0.22); /* 文本选中背景色 */
}


/* --- 3. BACKGROUND & DECORATIVE ELEMENTS / 背景与装饰元素 --- */
/* ---------------------------------------------------------- */

.background-gradient {
    position: fixed; /* 固定定位 */
    inset: 0; /* 覆盖整个视口 */
    width: 100%;
    height: 100%;
    background-image: var(--bg-image); /* 背景图片 */
    background-size: cover; /* 背景覆盖 */
    background-position: center; /* 背景居中 */
    background-repeat: no-repeat; /* 背景不重复 */
    z-index: -1; /* 置于底层 */
    transition: background-image 0.5s ease-in-out; /* 背景图片过渡 */
    will-change: transform; /* 性能优化提示 */
}

/* 静态装饰性渐变 */
body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
        radial-gradient(900px circle at 50% 10%, rgba(0, 0, 0, 0.10), transparent 60%),
        radial-gradient(900px circle at 50% 100%, rgba(0, 0, 0, 0.16), transparent 60%);
    pointer-events: none; /* 不响应鼠标事件 */
    z-index: -1;
}

[data-theme="dark"] body::before {
    background:
        radial-gradient(900px circle at 50% 10%, rgba(0, 0, 0, 0.35), transparent 60%),
        radial-gradient(900px circle at 50% 100%, rgba(0, 0, 0, 0.55), transparent 60%);
}

/* 动画装饰性渐变 */
.background-gradient::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
        radial-gradient(650px circle at 20% 25%, rgba(255, 255, 255, 0.14), transparent 62%),
        radial-gradient(780px circle at 80% 10%, rgba(var(--accent-rgb), 0.12), transparent 55%),
        radial-gradient(980px circle at 70% 95%, rgba(0, 0, 0, 0.18), transparent 62%);
    opacity: 0.42;
    pointer-events: none;
    will-change: transform, opacity;
    animation: floatBokeh 18s ease-in-out infinite; /* 浮动光斑动画 */
}

[data-theme="dark"] .background-gradient::before {
    background:
        radial-gradient(650px circle at 20% 25%, rgba(255, 255, 255, 0.08), transparent 65%),
        radial-gradient(780px circle at 80% 10%, rgba(var(--accent-rgb), 0.10), transparent 58%),
        radial-gradient(980px circle at 70% 95%, rgba(0, 0, 0, 0.50), transparent 62%);
    opacity: 0.52;
}

/* 鼠标交互式渐变 */
.background-gradient::after {
    content: '';
    position: absolute;
    inset: 0;
    background:
        radial-gradient(900px circle at var(--spot-x) var(--spot-y), rgba(var(--accent-rgb), var(--spot-a)), transparent 62%),
        radial-gradient(1000px circle at 50% 15%, rgba(255, 255, 255, 0.10), transparent 60%),
        radial-gradient(1100px circle at 25% 90%, rgba(0, 0, 0, 0.20), transparent 60%);
    opacity: 0.45;
    pointer-events: none;
    will-change: opacity, transform;
    animation: ambientGlow 14s ease-in-out infinite, bgBreathe var(--breathe-slow) ease-in-out infinite; /* 环境光和呼吸动画 */
}

[data-theme="dark"] .background-gradient::after {
    background:
        radial-gradient(900px circle at var(--spot-x) var(--spot-y), rgba(var(--accent-rgb), var(--spot-a)), transparent 65%),
        radial-gradient(1000px circle at 50% 15%, rgba(255, 255, 255, 0.08), transparent 62%),
        radial-gradient(1100px circle at 25% 90%, rgba(0, 0, 0, 0.55), transparent 62%);
    opacity: 0.55;
}

/* 用于 JS 效果的 Canvas */
.starfield-canvas {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
    opacity: 0; /* 初始透明 */
    transition: opacity 0.8s ease-in-out; /* 透明度过渡 */
}

body.is-ready .starfield-canvas {
    opacity: 1; /* 页面准备好后显示 */
}

#starfield-layer1 { opacity: 0.7; } /* 星空层1透明度 */
#starfield-layer2 { opacity: 0.5; } /* 星空层2透明度 */
#starfield-layer3 { opacity: 0.3; } /* 星空层3透明度 */
#shooting-star-canvas { z-index: -1; opacity: 1; } /* 流星层 */
#raindrop-canvas { z-index: -1; opacity: 0.7; } /* 雨滴层 */


/* --- 4. LAYOUT / 布局 --- */
/* ----------------------- */

.parallax-container {
    perspective: 2000px; /* 3D 视差容器 */
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

.grid-container {
    display: grid; /* 网格布局 */
    grid-template-columns: 1fr 1fr 1fr; /* 三列布局 */
    gap: clamp(18px, 3vw, 28px); /* 响应式间距 */
    align-items: start; /* 垂直居中对齐 */
    width: 100%;
    max-width: 1200px; /* 最大宽度 */
    padding: 0;
}

.column {
    display: flex;
    flex-direction: column; /* 列内元素垂直排列 */
    gap: clamp(18px, 3vw, 26px);
}

.center-links,
.widgets-column {
    justify-content: space-between; /* 仅在多项目的列中均匀分布 */
}

/* 大屏幕下调整列的顺序 */
@media (min-width: 961px) {
    .profile-column {
        order: 2; /* 个人信息列排在第二位 */
    }
    .center-links {
        order: 1; /* 链接列排在第一位 */
    }
    .widgets-column {
        order: 3; /* 小工具列排在第三位 */
    }
}

/* .full-height is no longer needed, flex-grow on profile-card handles this. */


/* --- 5. BASE COMPONENT STYLES / 基础组件样式 --- */
/* ---------------------------------------------- */

/* 玻璃拟态基础样式 */
.glass {
    position: relative;
    overflow: clip; /* 防止伪元素溢出 */
    border-radius: var(--radius-lg);
    border: 1px solid rgba(255, 255, 255, 0.28);
    background: rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(20px) saturate(150%); /* 背景模糊和饱和度 */
    -webkit-backdrop-filter: blur(20px) saturate(150%); /* Safari 兼容 */
    box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.25), /* 内阴影高光 */
        0 24px 60px rgba(0, 0, 0, 0.45); /* 外阴影 */
}

[data-theme="dark"] .glass {
    border-color: rgba(255, 255, 255, 0.18);
    background: rgba(16, 16, 18, 0.42);
    box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.14),
        0 24px 60px rgba(0, 0, 0, 0.55);
}

/* 玻璃内部的“液体”效果 */
.glass::before {
    content: "";
    position: absolute;
    inset: -10%;
    background:
        radial-gradient(180px 140px at 20% 30%, rgba(255, 255, 255, 0.25), transparent 60%),
        radial-gradient(220px 160px at 80% 40%, rgba(255, 255, 255, 0.18), transparent 65%),
        radial-gradient(320px 200px at 40% 85%, rgba(255, 255, 255, 0.12), transparent 70%);
    filter: blur(18px) saturate(140%);
    animation: drift 12s ease-in-out infinite alternate; /* 漂移动画 */
    pointer-events: none;
}

[data-theme="dark"] .glass::before {
    background:
        radial-gradient(180px 140px at 20% 30%, rgba(255, 255, 255, 0.05), transparent 60%),
        radial-gradient(220px 160px at 80% 40%, rgba(255, 255, 255, 0.04), transparent 65%),
        radial-gradient(320px 200px at 40% 85%, rgba(255, 255, 255, 0.03), transparent 70%);
}

/* 对角线高光效果 */
.glass::after {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    background:
        linear-gradient(110deg,
        rgba(255, 255, 255, 0.28) 0%,
        rgba(255, 255, 255, 0) 40% 60%,
        rgba(255, 255, 255, 0.16) 100%);
    mix-blend-mode: screen; /* 混合模式 */
    pointer-events: none;
}

/* 卡片基础样式 */
.card {
    padding: 20px;
    color: var(--text-primary);
    transform-style: preserve-3d; /* 保持 3D 变换 */
    will-change: transform;
    
    /* 用于 JS 交互的 CSS 变量 */
    --lift: 0px; /* 悬浮高度 */
    --enter-y: 0px; /* 入场 Y 偏移 */
    --tilt-x: 0deg; /* X 轴倾斜 */
    --tilt-y: 0deg; /* Y 轴倾斜 */
    --mx: 50%; /* 鼠标 X 坐标百分比 */
    --my: 15%; /* 鼠标 Y 坐标百分比 */
    --shine: 0; /* 光泽效果 */
    --magnetic-x: 0px; /* 磁性吸附 X */
    --magnetic-y: 0px; /* 磁性吸附 Y */
    --float-y: 0px; /* 浮动 Y */

    transform: perspective(900px) translate3d(var(--magnetic-x), calc(var(--lift) + var(--enter-y) + var(--magnetic-y) + var(--float-y)), 0) rotateX(var(--tilt-x)) rotateY(var(--tilt-y));
    transition: transform 0.22s var(--ease-out), box-shadow 0.22s var(--ease-out), filter 0.22s var(--ease-out), border-color 0.22s var(--ease-out);
}

.card:hover {
    --lift: -2px; /* 悬停时抬起 */
    --shine: 1;
    box-shadow: var(--card-hover-shadow), 0 0 0 1px rgba(255, 255, 255, 0.10) inset;
    filter: saturate(1.03) contrast(1.01);
}

.card:active {
    transform: perspective(900px) translate3d(0, calc(var(--lift) + 1px), 0) rotateX(var(--tilt-x)) rotateY(var(--tilt-y)); /* 点击时下沉 */
}

.link-card:focus-visible,
#theme-toggle:focus-visible {
    outline: 2px solid var(--accent-color); /* 键盘聚焦样式 */
    outline-offset: 4px;
    box-shadow: var(--focus-ring), var(--card-hover-shadow);
}


/* --- 6. SPECIFIC COMPONENT STYLES / 特定组件样式 --- */
/* ------------------------------------------------- */

/* 欢迎屏幕 */
#welcome-screen {
    position: fixed;
    inset: 0;
    z-index: 9999; /* 最高层级 */
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #F0EFEB; /* 浅色主题欢迎页特定背景 */
    transition: opacity 0.8s ease-in-out, visibility 0.8s ease-in-out;
}

[data-theme="dark"] #welcome-screen {
    background-color: var(--bg-color); /* 深色主题使用主题背景色 */
}

#welcome-screen.hidden {
    opacity: 0;
    visibility: hidden; /* 隐藏欢迎屏幕 */
}

#welcome-text-container {
    display: flex;
    align-items: center;
    font-family: "XinHuoTi", "NasaDisplay", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    color: #000000; /* 浅色主题欢迎页特定文本颜色 */
}

[data-theme="dark"] #welcome-text-container {
    color: var(--text-primary); /* 深色主题使用主题文本颜色 */
}

#welcome-text-container .cursor {
    display: inline-block;
    width: clamp(0.8rem, 2vw, 1.2rem);
    height: clamp(1.5rem, 4vw, 2.5rem);
    margin-left: 10px;
    background-color: var(--accent-color);
    animation: blink 1s step-end infinite; /* 光标闪烁动画 */
}

/* 个人资料卡片 (左列) */
.profile-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
    padding: 40px 20px;
    text-align: center;
}

.profile-content-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    width: 100%;
}

.avatar-large {
    position: relative;
    width: 128px;
    height: 128px;
    display: grid;
    place-items: center;
    border-radius: 999px;
    --halo-scale: 1;
    --halo-opacity: 0.72;
}

.avatar-large img {
    position: relative;
    z-index: 1;
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 4px solid rgba(255, 255, 255, 0.8);
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}

/* 头像光环效果 */
.avatar-large::before {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: inherit;
    background: conic-gradient(from 210deg, rgba(var(--accent-rgb), 0.0), rgba(var(--accent-rgb), 0.65), rgba(155, 102, 255, 0.55), rgba(var(--accent-rgb), 0.0));
    opacity: var(--halo-opacity);
    filter: blur(0.2px);
    transform: scale(var(--halo-scale));
    pointer-events: none;
    transition: transform 0.4s var(--ease-out), opacity 0.4s var(--ease-out);
}

.profile-name {
    margin: 10px 0;
    font-size: clamp(1.35rem, 1.6vw, 1.6rem);
    font-weight: 600;
    letter-spacing: 0.2px;
    color: var(--text-primary);
}

.profile-greeting {
    display: flex;
    flex-direction: column;
    gap: 6px;
    align-items: center;
}

.greeting-title {
    position: relative;
    overflow: hidden;
    min-height: 1.3em; /* 防止布局抖动 */
    font-size: 1.05rem;
    font-weight: 650;
    line-height: 1.3;
    letter-spacing: 0.2px;
    color: var(--text-primary);
}

.greeting-sub {
    font-size: 0.9rem;
    color: var(--text-secondary);
    opacity: 0.92;
}

.profile-desc-box {
    position: relative;
    overflow: hidden;
    max-width: 84%;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px 20px;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.30);
    background: rgba(255, 255, 255, 0.22);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.10);
    font-size: 0.92rem;
    text-align: center;
    color: var(--text-primary);
}

[data-theme="dark"] .profile-desc-box {
    background: rgba(0, 0, 0, 0.22);
    border-color: rgba(255, 255, 255, 0.16);
}

.profile-desc-text {
    position: relative;
    top: -1px; /* 修正字体垂直对齐 */
}

/* 个人简介的扫光动画 */
.profile-desc-box::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 60%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
    transform: translateX(-150%);
    pointer-events: none;
    animation: shimmer 6s infinite 2.5s;
}

[data-theme="dark"] .profile-desc-box::after {
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.12), transparent);
}

/* 链接卡片 (中列) */
.center-links {
    gap: clamp(18px, 2.8vw, 28px);
}

.link-card {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 20px;
    padding: 22px;
    min-height: 110px;
    text-decoration: none;
    --link-accent-rgb: var(--accent-rgb); /* 链接特定的强调色 */
    --glass-border: rgba(var(--link-accent-rgb), 0.20);
}

.link-card:hover {
    --glass-border: rgba(var(--link-accent-rgb), 0.40);
}

.link-card:active {
    transform: translateY(-1px) scale(0.99);
}

/* The link-card hover glow is now handled by the icon's pseudo-element.
   Removing this rule allows the link-card to inherit the default .glass::after highlight,
   which fixes the color inconsistency. */

/* 特定链接的强调色 */
.link-github { --link-accent-rgb: 155, 102, 255; }
.link-bilibili { --link-accent-rgb: 0, 161, 214; }
.link-blog { --link-accent-rgb: 230, 126, 34; }

.icon-circle {
    position: relative;
    flex-shrink: 0;
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    border-radius: 50%;
    border: 1px solid rgba(var(--link-accent-rgb), 0.35);
    background: rgba(var(--link-accent-rgb), 0.14);
    box-shadow: 0 16px 35px rgba(var(--link-accent-rgb), 0.10);
    color: rgb(var(--link-accent-rgb));
    font-size: 1.6rem;
    transition: transform 0.22s var(--ease-out), box-shadow 0.22s var(--ease-out);
}

[data-theme="dark"] .icon-circle {
    background: rgba(var(--link-accent-rgb), 0.10);
}

.icon-circle i {
    transition: transform 0.22s var(--ease-out);
}

.icon-circle::after {
    content: '';
    position: absolute;
    inset: -40%;
    background: radial-gradient(circle at 30% 25%, rgba(255, 255, 255, 0.55), transparent 55%);
    opacity: 0.55;
    transform: rotate(-12deg);
    pointer-events: none;
}

.icon-circle::before {
    content: '';
    position: absolute;
    inset: -20px;
    z-index: -1;
    border-radius: inherit;
    background: radial-gradient(circle, rgba(var(--link-accent-rgb), 0.25), transparent 65%);
    opacity: 0;
    transform: scale(0.8);
    pointer-events: none;
    transition: opacity 0.3s var(--ease-out), transform 0.3s var(--ease-out);
}

.link-text {
    position: relative;
    top: -2px; /* 修正字体垂直对齐 */
    min-width: 80px; /* 防止布局抖动 */
    font-size: clamp(1.2rem, 1.8vw, 1.45rem);
    font-weight: 600;
    letter-spacing: 0.2px;
    text-align: left;
    color: var(--text-primary);
    transition: transform 0.22s var(--ease-out);
}

.link-text.is-scrambling {
    display: inline-block;
    width: var(--scramble-width);
    max-width: var(--scramble-width);
    overflow: hidden;
    white-space: nowrap;
}

.link-text .dud {
    display: inline-block;
    width: 1ch;
    text-align: center;
    font-family: "NasaDisplay", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}

.link-chevron {
    margin-left: auto; /* 推到最右边 */
    font-size: 1rem;
    color: var(--text-secondary);
    opacity: 0.45;
    transition: transform 0.22s var(--ease-out), opacity 0.22s var(--ease-out);
}

.link-card:hover .icon-circle {
    transform: translateY(-1px) scale(1.015);
    box-shadow: 0 18px 45px rgba(var(--link-accent-rgb), 0.14);
}

.link-card:hover .icon-circle::before {
    opacity: 1;
    transform: scale(1.15);
}

.link-card:hover .icon-circle i {
    transform: translateY(-1px) rotate(-8deg);
}

.link-card:hover .link-text {
    transform: translateY(-1px);
}

.link-card:hover .link-chevron {
    transform: translateX(2px);
    opacity: 0.9;
}

/* 时钟小工具 (右列) */
.clock-card {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 200px;
    --glass-border: rgba(var(--accent-rgb), 0.18);
}


.clock-display {
    display: flex;
    align-items: baseline;
    justify-content: center;
    gap: 10px;
    font-family: "DS-Digital", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    font-variant-numeric: tabular-nums; /* 等宽数字 */
    letter-spacing: 0.5px;
}

.clock-part {
    font-family: inherit;
    font-size: clamp(3.2rem, 6vw, 4.8rem);
    font-weight: bold;
    line-height: 1;
    color: var(--text-primary);
    text-shadow: 0 18px 45px rgba(0, 0, 0, 0.10);
}

[data-theme="dark"] .clock-part {
    text-shadow: 0 20px 55px rgba(0, 0, 0, 0.55);
}

.clock-sep {
    font-family: inherit;
    font-size: clamp(2.4rem, 4.5vw, 3.8rem);
    font-weight: bold;
    line-height: 1;
    color: var(--text-secondary);
    opacity: 0.45;
    animation: clockPulse 2.4s ease-in-out infinite; /* 时钟分隔符脉动动画 */
}

[data-theme="dark"] .clock-sep {
    opacity: 0.52;
}

.clock-part--second {
    font-size: clamp(2.2rem, 4vw, 3.3rem);
    opacity: 0.85;
}

/* 日历小工具 (右列) */
.calendar-card {
    position: relative;
    display: flex;
    flex-direction: column;
    padding: 30px;
    min-height: 360px;
    --glass-border: rgba(var(--accent-rgb), 0.14);
}

.calendar-top-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    width: 100%;
    margin-bottom: 20px;
}

.calendar-title {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.calendar-title-large {
    font-size: 2.5rem;
    font-weight: 500;
    letter-spacing: 0.6px;
    color: var(--text-primary);
}

.calendar-month {
    font-size: 0.95rem;
    letter-spacing: 0.3px;
    color: var(--text-secondary);
    opacity: 0.95;
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr); /* 7 列 */
    gap: 6px;
    width: 100%;
    margin-top: auto;
    font-size: 0.8rem;
    text-align: center;
    opacity: 1;
}

.calendar-day-name {
    margin-bottom: 5px;
    font-weight: bold;
    color: var(--accent-color);
    opacity: 0.9;
}

.calendar-day-name.weekend {
    color: rgba(var(--accent-rgb), 0.72);
}

.calendar-day {
    padding: 6px;
    border-radius: 6px;
    color: var(--text-secondary);
    transition: transform 0.18s var(--ease-out), background-color 0.18s var(--ease-out), color 0.18s var(--ease-out);
}

.calendar-day:hover:not(.empty) {
    cursor: pointer;
    transform: translateY(-1px);
    background: rgba(var(--accent-rgb), 0.18);
}

.calendar-day.weekend:not(.empty):not(.current) {
    color: rgba(var(--accent-rgb), 0.75);
}

.calendar-day.current {
    position: relative;
    z-index: 1;
    font-weight: bold;
    color: #fff;
    background: var(--accent-color);
    box-shadow: 0 14px 30px rgba(var(--accent-rgb), 0.26);
    animation: todayPulse 2.8s ease-in-out infinite; /* 当天日期脉动动画 */
}

.calendar-day.current:hover {
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 18px 44px rgba(var(--accent-rgb), 0.44);
}


/* 天气小工具 */
.weather-card {
    padding: 20px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    gap: 12px;
    min-height: 180px;
    opacity: 0; /* 初始隐藏，由 JS 控制显示 */
    transition: opacity 0.5s ease-in-out;
}

.weather-card:not([hidden]) {
    opacity: 1;
}

.weather-content {
    display: flex;
    flex-direction: column;
    gap: 10px;
    text-align: center;
}

.weather-location {
    font-size: 1rem;
    font-weight: 500;
    color: var(--text-secondary);
}

.weather-main {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    margin: 10px 0;
}

.weather-temp {
    font-family: "DS-Digital", monospace;
    font-size: 3.5rem;
    font-weight: bold;
    color: var(--text-primary);
    line-height: 1;
}

.weather-icon {
    font-size: 2.8rem;
    color: var(--accent-color);
}

.weather-description {
    font-size: 0.95rem;
    color: var(--text-primary);
    opacity: 0.9;
}

/* 主题切换按钮 */
.theme-switch-wrapper {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 100;
}

#theme-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    width: auto;
    height: 40px;
    padding: 0 14px;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.32);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.26), rgba(255, 255, 255, 0.12));
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    box-shadow: 0 14px 30px rgba(0, 0, 0, 0.22), 0 0 0 1px rgba(255, 255, 255, 0.10) inset;
    color: var(--text-primary);
    font-size: 1rem;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.18s ease, box-shadow 0.18s ease, border-color 0.18s ease;
}

[data-theme="dark"] #theme-toggle {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.10), rgba(255, 255, 255, 0.06));
    border-color: rgba(255, 255, 255, 0.18);
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.55), 0 0 0 1px rgba(255, 255, 255, 0.08) inset;
}

#theme-toggle:hover {
    transform: translateY(-2px);
    border-color: rgba(255, 255, 255, 0.40);
    box-shadow: 0 20px 48px rgba(0, 0, 0, 0.28), 0 0 0 1px rgba(255, 255, 255, 0.12) inset;
}

#theme-toggle:active {
    transform: translateY(-1px) scale(0.98);
}

#theme-toggle .theme-toggle-text {
    position: relative;
    top: -1.5px; /* 修正字体垂直对齐 */
}

#theme-toggle i {
    transition: transform 0.22s var(--ease-out);
}

#theme-toggle:hover i {
    transform: rotate(-12deg);
}


/* --- 7. ANIMATIONS / 动画 --- */
/* --------------------------- */

@property --enter-y {
    syntax: "<length>";
    inherits: false;
    initial-value: 0px;
}

/* 初始卡片入场动画 */
body:not(.is-ready) .card {
    opacity: 0;
    filter: blur(10px) saturate(0.92);
    --enter-y: 14px;
}

body.is-ready .card {
    animation: glitchScanIn 1s var(--ease-out) both;
    animation-delay: calc(var(--stagger, 0) * 90ms); /* 错开动画 */
}

@keyframes glitchScanIn {
    0% {
        opacity: 0;
        transform: perspective(900px) translate3d(var(--magnetic-x), calc(var(--lift) + var(--enter-y) + var(--magnetic-y)), 0) rotateX(var(--tilt-x)) rotateY(var(--tilt-y)) scale(0.98);
        clip-path: inset(0 100% 0 0);
        filter: hue-rotate(20deg);
    }
    20% {
        opacity: 0.8;
        transform: perspective(900px) translate3d(var(--magnetic-x), calc(var(--lift) + var(--enter-y) + var(--magnetic-y) - 5px), 0) rotateX(var(--tilt-x)) rotateY(var(--tilt-y)) scale(1.01);
        text-shadow: 2px 0 0 red, -2px 0 0 cyan; /* 故障效果 */
    }
    60% {
        opacity: 1;
        clip-path: inset(0 0 0 0);
        filter: hue-rotate(0);
        text-shadow: none;
    }
    80% {
        transform: perspective(900px) translate3d(var(--magnetic-x), calc(var(--lift) + var(--enter-y) + var(--magnetic-y) + 2px), 0) rotateX(var(--tilt-x)) rotateY(var(--tilt-y)) scale(1);
    }
    100% {
        opacity: 1;
        transform: perspective(900px) translate3d(var(--magnetic-x), calc(var(--lift) + var(--enter-y) + var(--magnetic-y)), 0) rotateX(var(--tilt-x)) rotateY(var(--tilt-y)) scale(1);
    }
}

/* 问候语文字入场动画 */
.greeting-title span {
    display: inline-block;
    opacity: 0;
    transform: translateY(100%);
    animation: charFadeIn 0.5s forwards;
    animation-delay: calc(var(--char-index) * 0.05s); /* 字符错开动画 */
}

@keyframes charFadeIn {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* 通用环境动画 */
@keyframes blink {
    from, to { background-color: transparent; }
    50% { background-color: var(--accent-color); }
}

@keyframes ambientGlow {
    0% { opacity: 0.40; }
    50% { opacity: 0.62; }
    100% { opacity: 0.40; }
}

@keyframes bgBreathe {
    0%, 100% { transform: scale(1.02); }
    50% { transform: scale(1.04); }
}

@keyframes floatBokeh {
    0%, 100% { transform: translate3d(0, 0, 0) scale(1.02); opacity: 0.40; }
    50% { transform: translate3d(-1.2%, 0.8%, 0) scale(1.03); opacity: 0.55; }
}

@keyframes glassBreathe {
    0%, 100% { filter: blur(0px); }
    50% { filter: blur(0.4px); }
}

@keyframes drift {
    0%   { transform: translate(-2%, -3%) scale(1); }
    50%  { transform: translate(3%, 2%)  scale(1.03); }
    100% { transform: translate(-1%, 3%) scale(1.05); }
}

@keyframes clockPulse {
    0%, 100% { opacity: 0.46; }
    50% { opacity: 0.68; }
}

@keyframes todayPulse {
    0%, 100% { box-shadow: 0 14px 30px rgba(var(--accent-rgb), 0.24); }
    50% { box-shadow: 0 18px 44px rgba(var(--accent-rgb), 0.34); }
}

@keyframes shimmer {
    100% {
        transform: translateX(150%);
    }
}

@keyframes dash-flow {
    to {
        stroke-dashoffset: -200;
    }
}


/* --- 8. VIEW TRANSITIONS / 视图过渡 --- */
/* -------------------------------------- */

/* 禁用默认的浏览器淡入淡出动画 */
::view-transition-old(root),
::view-transition-new(root) {
    animation: none;
    mix-blend-mode: normal;
}

/* 深色到浅色过渡时，旧的（深色）视图在顶部 */
[data-theme="light"]::view-transition-old(root) {
    z-index: 1;
}
[data-theme="light"]::view-transition-new(root) {
    z-index: 999;
}

/* 浅色到深色过渡时，新的（深色）视图在顶部 */
[data-theme="dark"]::view-transition-old(root) {
    z-index: 1;
}
[data-theme="dark"]::view-transition-new(root) {
    z-index: 999;
}


/* --- 9. SETTINGS PANEL / 设置面板 --- */
/* ------------------------------------ */

.settings-wrapper {
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 100;
}

#settings-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    padding: 0;
    border-radius: 50%;
    border: 1px solid rgba(255, 255, 255, 0.32);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.26), rgba(255, 255, 255, 0.12));
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    box-shadow: 0 14px 30px rgba(0, 0, 0, 0.22), 0 0 0 1px rgba(255, 255, 255, 0.10) inset;
    color: var(--text-primary);
    font-size: 1.1rem;
    cursor: pointer;
    transition: transform 0.18s ease, box-shadow 0.18s ease, border-color 0.18s ease;
}

[data-theme="dark"] #settings-toggle {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.10), rgba(255, 255, 255, 0.06));
    border-color: rgba(255, 255, 255, 0.18);
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.55), 0 0 0 1px rgba(255, 255, 255, 0.08) inset;
}

#settings-toggle:hover {
    transform: translateY(-2px) rotate(15deg);
    border-color: rgba(255, 255, 255, 0.40);
    box-shadow: 0 20px 48px rgba(0, 0, 0, 0.28), 0 0 0 1px rgba(255, 255, 255, 0.12) inset;
}

#settings-toggle:active {
    transform: translateY(-1px) scale(0.98) rotate(10deg);
}

#settings-panel {
    position: fixed;
    top: 70px;
    left: 20px;
    z-index: 101;
    width: 280px;
    padding: 20px;
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
    pointer-events: none;
    transition: opacity 0.3s var(--ease-out), transform 0.3s var(--ease-out);
    will-change: opacity, transform;
}

#settings-panel:not([hidden]) {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto;
}

.settings-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.settings-header h3 {
    font-size: 1.2rem;
    font-weight: 600;
    margin: 0;
}

#settings-close {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 1.8rem;
    line-height: 1;
    cursor: pointer;
    opacity: 0.7;
    transition: opacity 0.2s ease, transform 0.2s ease;
}

#settings-close:hover {
    opacity: 1;
    transform: rotate(90deg);
}

.settings-content {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.setting-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.setting-item label {
    font-size: 0.95rem;
    color: var(--text-primary);
}

/* Custom Toggle Switch */
.toggle-switch {
    -webkit-appearance: none;
    appearance: none;
    position: relative;
    width: 40px;
    height: 22px;
    border-radius: 11px;
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.toggle-switch::before {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background-color: #fff;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    transition: transform 0.2s var(--ease-out);
}

.toggle-switch:checked {
    background-color: var(--accent-color);
}

.toggle-switch:checked::before {
    transform: translateX(18px);
}

/* Custom Select Switch */
.select-switch {
    -webkit-appearance: none;
    appearance: none;
    background-color: rgba(255, 255, 255, 0.7);
    border: 1px solid rgba(0, 0, 0, 0.12);
    border-radius: 8px;
    padding: 6px 30px 6px 12px;
    color: #1f1f1f;
    font-size: 0.95rem;
    cursor: pointer;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%23a0a0a0' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 8px center;
    background-size: 1em;
    transition: all 0.2s ease;
}

[data-theme="dark"] .select-switch {
    background-color: rgba(18, 18, 20, 0.65);
    border-color: rgba(255, 255, 255, 0.2);
    color: var(--text-primary);
}

.select-switch option {
    color: #1f1f1f;
    background-color: #f7f7f7;
}

[data-theme="dark"] .select-switch option {
    color: var(--text-primary);
    background-color: #1c1c1f;
}

.select-switch:hover {
    border-color: rgba(255, 255, 255, 0.35);
    background-color: rgba(0, 0, 0, 0.25);
}

[data-theme="light"] .select-switch:hover {
    border-color: rgba(0, 0, 0, 0.2);
    background-color: rgba(255, 255, 255, 0.85);
}

.select-switch:focus {
    outline: none;
    border-color: var(--accent-color);
    box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.2);
}


/* --- 10. FOOTER / 页脚 --- */
/* -------------------------- */

.site-footer {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 10px 0;
    text-align: center;
    font-size: 0.8rem;
    color: var(--text-secondary);
    background: rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    z-index: 10;
    opacity: 0.7;
    transition: opacity 0.3s ease;
}

.site-footer:hover {
    opacity: 1;
}

[data-theme="dark"] .site-footer {
    background: rgba(0, 0, 0, 0.2);
}


/* --- 11. CLI EASTER EGG / CLI 彩蛋 --- */
/* ------------------------------------- */

@font-face {
    font-family: "JetBrains Mono";
    src:
        url("../fonts/JetBrainsMono-Regular.woff2") format("woff2");
    font-weight: normal;
    font-style: normal;
    font-display: swap;
}

#cli-container {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 40%;
    background: rgba(0, 0, 0, 0.82);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-top: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 -12px 32px rgba(0, 0, 0, 0.45);
    z-index: 200;
    color: #e0e0e0;
    font-family: "JetBrains Mono", "NasaDisplay", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    font-size: 0.9rem;
    padding: 15px;
    display: flex;
    flex-direction: column;
    transform: translateY(100%);
    transition: transform 0.4s var(--ease-out);
    --cli-accent: var(--accent-color);
    --cli-muted: var(--text-secondary);
}

#cli-container:not([hidden]) {
    transform: translateY(0);
}

#cli-output {
    flex-grow: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 8px;
    white-space: pre-wrap;
    word-break: normal;
    overflow-wrap: anywhere;
    line-height: 1.45;
    font-variant-ligatures: none;
}

#cli-output::-webkit-scrollbar {
    width: 8px;
}

#cli-output::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
}

#cli-output::-webkit-scrollbar-thumb {
    background: rgba(var(--accent-rgb), 0.6);
    border-radius: 4px;
}

#cli-input-line {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
    padding-top: 6px;
    border-top: 1px solid rgba(255, 255, 255, 0.08);
}

.cli-prompt {
    color: var(--cli-accent);
    margin-right: 8px;
    white-space: nowrap;
}

#cli-input {
    flex-grow: 1;
    background: none;
    border: none;
    color: inherit;
    font-family: inherit;
    font-size: inherit;
    padding: 0;
}

#cli-input:focus {
    outline: none;
    caret-color: var(--accent-color);
}

#cli-output > div {
    padding: 2px 0;
}

#cli-output pre {
    margin: 0;
    font-family: inherit;
}

.cli-section {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.cli-banner {
    white-space: pre;
    line-height: 1;
    letter-spacing: 0;
    font-weight: 700;
    font-variant-ligatures: none;
    font-feature-settings: "liga" 0, "calt" 0;
}

.cli-help,
.cli-info {
    line-height: 1.5;
}

.cli-command {
    color: var(--cli-accent);
    font-weight: 600;
}

.cli-command-input {
    color: #e6edf3;
}

.cli-title {
    color: var(--cli-muted);
}

.cli-info {
    line-height: 1.5;
}

.cli-box {
    white-space: pre;
    font-family: inherit;
    line-height: 1.4;
    color: inherit;
}

.cli-divider,
.cli-kv,
.cli-label,
.cli-value {
    display: none;
}

.cli-user,
.cli-host {
    color: var(--cli-accent);
}

@media (min-width: 961px) {
    #cli-container {
        height: 45%;
        background: linear-gradient(180deg, rgba(6, 8, 12, 0.75), rgba(6, 8, 12, 0.7));
        background-image:
            linear-gradient(rgba(255, 255, 255, 0.035) 1px, transparent 1px),
            linear-gradient(180deg, rgba(6, 8, 12, 0.75), rgba(6, 8, 12, 0.7));
        background-size: 100% 3px, 100% 100%;
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border-top: 1px solid rgba(124, 255, 178, 0.18);
        box-shadow: 0 -16px 36px rgba(0, 0, 0, 0.5);
        color: #d7e0ea;
        --cli-accent: #7cffb2;
        --cli-muted: #9aa6b2;
    }

    .cli-banner {
        color: #e6edf3;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.08);
    }
}

/* --- 音乐卡片重构样式 --- */
#music-card {
    display: flex;
    padding: 0; /* 移除卡片内边距，由 APlayer 内部控制 */
    width: 100%;
    max-width: 380px;
    margin: 0 auto; /* 在列内居中 */
}

#music-card .aplayer {
    width: 100%;
    margin: 0;
    background: transparent !important; /* 保持透明背景以适应玻璃效果 */
    box-shadow: none !important;
    border-radius: var(--radius-lg); /* 继承卡片圆角 */
    overflow: hidden;
}

#music-card .aplayer .aplayer-body {
    display: flex;
    align-items: center;
    gap: 16px; /* 封面和信息的间距 */
    padding: 16px; /* 统一内边距 */
}

#music-card .aplayer .aplayer-pic {
    flex-shrink: 0;
    width: 80px; /* 调整封面尺寸 */
    height: 80px;
    border-radius: 12px; /* 封面圆角 */
    overflow: hidden;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s var(--ease-out);
}

#music-card .aplayer:hover .aplayer-pic {
    transform: scale(1.05) rotate(-3deg); /* 添加悬停效果 */
}

#music-card .aplayer .aplayer-info {
    flex: 1 1 auto; /* 占据剩余空间 */
    display: flex;
    flex-direction: column;
    justify-content: center; /* 垂直居中内容 */
    min-width: 0; /* 防止 flex 子项溢出 */
    padding: 0 !important;
    margin: 0 !important; /* 彻底移除 APlayer 的默认边距 */
    border: none !important;
    height: auto !important; /* 确保高度自适应 */
}

#music-card .aplayer .aplayer-music {
    margin-bottom: 10px !important; /* 音乐信息和进度条之间的间距 */
    /* 移除固定高度和 flex 布局，让其自然堆叠 */
}

#music-card .aplayer .aplayer-title,
#music-card .aplayer .aplayer-author {
    white-space: normal; /* 允许文本换行 */
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.4; /* 调整行高以获得更好的视觉效果 */
    width: 100%; /* 确保文本溢出正常工作 */
    word-break: break-all; /* 允许在任意字符间换行 */
}

#music-card .aplayer .aplayer-title {
    font-size: 1.0rem !important; /* 调整字体大小 */
    font-weight: 600;
    color: var(--text-primary) !important;
    margin-bottom: 4px; /* 标题和作者之间的间距 */
}

#music-card .aplayer .aplayer-author {
    font-size: 0.85rem !important;
    color: var(--text-secondary) !important;
}

#music-card .aplayer .aplayer-lrc {
    display: none; /* 始终隐藏歌词 */
}

#music-card .aplayer .aplayer-controller {
    display: flex;
    align-items: center;
}

#music-card .aplayer .aplayer-bar-wrap {
    flex: 1;
    padding: 0 !important;
    margin: 0 !important;
}

/* --- 通用 APlayer 颜色和细节调整 --- */
#music-card .aplayer .aplayer-controller .aplayer-time {
    color: var(--text-secondary) !important;
    font-size: 0.8rem !important;
}

#music-card .aplayer .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-loaded {
    background: rgba(var(--accent-rgb), 0.2) !important;
}

#music-card .aplayer .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played {
    background: var(--accent-color) !important;
}

#music-card .aplayer .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played .aplayer-thumb {
    background: var(--accent-color) !important;
    box-shadow: 0 0 8px rgba(var(--accent-rgb), 0.5);
}

#music-card .aplayer .aplayer-controller .aplayer-time .aplayer-icon {
    color: var(--text-secondary) !important;
    opacity: 0.7;
    transition: all 0.2s ease;
}

#music-card .aplayer .aplayer-controller .aplayer-time .aplayer-icon:hover {
    opacity: 1;
    color: var(--accent-color) !important;
}

/* 音乐加载失败时的容器排版 */
#music-card .music-player-container {
    width: 100%;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

#music-card .music-header {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 600;
    color: var(--text-primary);
}

#music-card .music-header i {
    color: var(--accent-color);
}

#music-card .music-content {
    display: flex;
    justify-content: center;
}

/* 一言 (Hitokoto) 回退样式 */
.hitokoto-container {
    text-align: center;
    font-size: 0.95rem;
    line-height: 1.6;
    width: 100%;
    color: var(--text-primary);
    padding: 10px; /* 为一言添加一些内边距 */
}

#hitokoto-text {
    margin: 0 0 0.5em;
    min-height: 2.2em; /* 预留至少两行的高度，防止切换时跳动 */
    display: inline-block; /* 让光标能紧随其后 */
    max-width: 100%;
    white-space: normal;
    word-break: break-word;
}

#hitokoto-from {
    font-size: 0.8rem;
    color: var(--text-secondary);
    text-align: right;
    width: 100%;
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
    margin: 0.5em 0 0;
}

/* 打字机光标 */
.cursor {
    display: inline-block;
    width: 8px;
    height: 1em;
    background-color: var(--text-primary);
    margin-left: 4px;
    animation: blink 1s infinite;
    vertical-align: text-bottom;
}

@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
}


/* --- 12. RESPONSIVE & ACCESSIBILITY / 响应式与可访问性 --- */
/* --------------------------------------------------------- */

@media (max-width: 960px) {
    /* 在移动端隐藏星空背景以提升性能 */
    .starfield-canvas {
        display: none;
    }

    body {
        padding: 16px;
    }
    .theme-switch-wrapper {
        top: 14px;
        right: 14px;
    }
    .grid-container {
        grid-template-columns: 1fr; /* 在小屏幕上变为单列布局 */
    }

    /* 重置所有列的网格位置，以强制实现单列堆叠 */
    .column:nth-child(1), /* 个人信息列 */
    .column:nth-child(2), /* 链接列 */
    .column:nth-child(3) { /* 小工具列 */
        grid-column: auto;
        grid-row: auto;
        order: unset; /* 移除大屏幕下的 order 属性 */
    }

    .column:nth-child(3) {
        flex-direction: column; /* 在更小的屏幕上，小工具恢复垂直排列 */
    }
    .profile-card {
        padding: 34px 18px;
    }
    .full-height {
        min-height: 460px;
    }
    .center-links {
        min-height: unset;
        padding: 0;
        gap: 14px;
    }
    .link-card {
        min-height: 92px;
        padding: 18px;
        gap: 16px;
    }
    .clock-card {
        min-height: 170px;
    }
    .clock-display {
        flex-wrap: wrap;
        gap: 8px;
    }
    .calendar-card {
        min-height: 320px;
        padding: 24px;
    }
    .calendar-title-large {
        font-size: 2.15rem;
    }
}

/* 减少动画的媒体查询 */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        transition: none !important;
        animation: none !important;
    }
    body:not(.is-ready) .card {
        opacity: 1;
        filter: none;
        --enter-y: 0px;
    }
    .card:hover,
    #theme-toggle:hover {
        transform: none;
    }
    .background-gradient {
        transform: none !important;
    }
}
